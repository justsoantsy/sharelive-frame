<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
  <title>Frame - ShareLive</title>
  <link rel="stylesheet" href="css/styles.css">
  <!-- Meta tags will be filled with JavaScript based on the URL parameters -->
  <meta property="fc:frame" content="" />
  <meta property="fc:frame:video" content="" />
  <meta property="fc:frame:video:type" content="application/x-mpegURL" />
  <meta property="fc:frame:image" content="" />
  <meta property="og:image" content="" />
</head>
<body>

  <!-- Video player placeholder -->
  <video id="my-video" class="video-js" controls preload="auto" width="640" height="264" poster="" data-setup="{}">
    <source src="" type="application/x-mpegURL" />
    <p class="vjs-no-js">
      To view this video please enable JavaScript, and consider upgrading to a
      web browser that
      <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
    </p>
  </video>

  <script>
    // Function to retrieve URL parameters
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Function to update the meta tags and video source
    function updateFrame() {
      const videoURL = getQueryParam('playbackURL') || 'https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8';
      const imageURL = getQueryParam('playbackImage') || 'https://www.w3schools.com/w3images/mountains.jpg';
      const videoElement = document.getElementById('my-video');

      document.querySelector('meta[property="fc:frame"]').content = 'vNext';
      document.querySelector('meta[property="fc:frame:video"]').content = videoURL;
      document.querySelector('meta[property="fc:frame:image"]').content = imageURL;
      document.querySelector('meta[property="og:image"]').content = imageURL;

      videoElement.src = videoURL;
      videoElement.poster = imageURL;

      // If using Video.js, you might need to initialize the player here
      videojs(videoElement);
    }

    // Update the frame when the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', updateFrame);
  </script>
</body>
</html>
