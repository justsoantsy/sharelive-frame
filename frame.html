<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
  <title>Frame - ShareLive</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div id="frame-content"></div>

  <script>
    // Default values
    const defaultImage = 'https://static.wixstatic.com/media/707696_0e1d8dd641a8446282a0eaac71bed7a6~mv2.png'; // Provide the path to your default image
    const defaultTitle = 'NEW VIDEO';

    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    function setupFrame() {
      const userTitle = getQueryParam('title');
      const videoURL = getQueryParam('playbackURL');
      const imageURL = getQueryParam('image') || defaultImage;
      const title = userTitle || defaultTitle;

      const frameContent = document.getElementById('frame-content');

      if (videoURL) {
        // If there's a video URL, attempt to play the video
        frameContent.innerHTML = `
          <video id="video-player" class="video-js" controls preload="auto" width="640" height="360" poster="${imageURL}" data-setup="{}">
            <source src="${videoURL}" type="application/x-mpegURL" />
          </video>
        `;
        videojs(document.getElementById('video-player'));
      } else {
        // If the video URL isn't provided or can't be played, show the title and image with 50% opacity
        frameContent.innerHTML = `
          <div style="background-image: url('${imageURL}'); background-size: cover; opacity: 0.8; width: 640px; height: 360px; position: relative;display: flex; justify-content: center; align-items: center;">
            <h2 class="watch-now" style="font-size: 2.5em; font-weight: 800;">${title}</h2>
          </div>
        `;
      }
    }

    document.addEventListener('DOMContentLoaded', setupFrame);
  </script>  
</body>
</html>
