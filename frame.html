<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
  <title>Frame - ShareLive</title>
  <link rel="stylesheet" href="css/styles.css">
  <!-- Meta tags will be filled with JavaScript based on the URL parameters -->
  <!-- The fc:frame meta tags are not standard OG tags and may not be used by most platforms. -->
  <meta property="og:title" content="" />
  <meta property="og:description" content="" />
  <meta property="og:image" content="" />
  <meta property="og:video" content="" />
  <meta property="og:video:type" content="application/x-mpegURL" />
</head>
<body>
  <!-- Container for dynamically loaded content -->
  <div id="content-container"></div>

  <script>
    // Function to retrieve URL parameters
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }
  
    // Function to dynamically create content based on the provided metadata
    function createContent() {
      const title = getQueryParam('title');
      const description = getQueryParam('description');
      const videoURL = getQueryParam('playbackURL');
      const imageURL = getQueryParam('image');
      const container = document.getElementById('content-container');

      // Clear previous content
      container.innerHTML = '';

      // Prioritize video if provided
      if (videoURL) {
        const videoElement = document.createElement('video');
        videoElement.className = 'video-js';
        videoElement.controls = true;
        videoElement.preload = 'auto';
        videoElement.style.width = '640px';
        videoElement.style.height = '264px';
        videoElement.poster = imageURL || 'https://static.wixstatic.com/media/707696_0e1d8dd641a8446282a0eaac71bed7a6~mv2.png'; // Specify a default poster image file
        videoElement.innerHTML = `<source src="${videoURL}" type="application/x-mpegURL">`;
        container.appendChild(videoElement);
        videojs(videoElement);
      }
      // Fallback to image if video is not provided
      else if (imageURL) {
        const imageElement = document.createElement('img');
        imageElement.src = imageURL;
        imageElement.style.width = '640px';
        imageElement.style.height = '264px';
        imageElement.alt = 'Fallback image';
        container.appendChild(imageElement);
      }
      // Fallback to colored background with text
      else {
        const background = document.createElement('div');
        background.style.backgroundColor = '#110C37'; // Default background color
        background.style.width = '640px';
        background.style.height = '264px';
        background.style.color = '#fff'; // Text color
        background.style.display = 'flex';
        background.style.alignItems = 'center';
        background.style.justifyContent = 'center';
        background.style.flexDirection = 'column';
        background.innerHTML = `
          <h1 style="font-weight: 800;">${title || 'Title Not Provided'}</h1>
          <p style="font-weight: 800; color: #E748E6;">WATCH NOW</p>
  `;
        container.appendChild(background);
      }
    }
  
    document.addEventListener('DOMContentLoaded', createContent);
  </script>  
</body>
</html>
